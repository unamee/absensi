<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-lg border-0 rounded-3">
        <div class="card-header bg-primary text-white">
          <h4 class="mb-0">Update Employee: {{ employee.username }}</h4>
        </div>

        <div class="card-body">
          <form
            hx-post="{% url 'update-employee' employee.employee.id %}"
            hx-target="#content"
            hx-swap="innerHTML"
            enctype="multipart/form-data"
          >
            {% csrf_token %}
            <div class="row g-3">
              <!-- Kolom Kiri -->
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Username</label>
                  <input type="text" name="username" class="form-control"
                         value="{{ employee.username }}" required />
                </div>

                <div class="mb-3">
                  <label class="form-label">Password</label>
                  <input type="password" name="password" class="form-control"
                         placeholder="Leave blank to keep current password" />
                </div>

                <div class="mb-3">
                  <label class="form-label">ID Karyawan</label>
                  <input type="text" name="id_karyawan" class="form-control"
                         value="{{ employee.employee.id_karyawan }}" required />
                </div>

                <div class="mb-3">
                  <label class="form-label">ID PIN</label>
                  <input type="text" name="id_pin" class="form-control"
                         value="{{ employee.employee.id_pin }}" />
                </div>

                <div class="mb-3">
                  <label class="form-label">Department</label>
                  <select name="dept" class="form-select">
                    <option value="">-- Pilih Department --</option>
                    {% for d in depts %}
                      <option value="{{ d.id_dept }}"
                        {% if d.id_dept == employee.employee.dept_id %}selected{% endif %}>
                        {{ d.nama_dept }}
                      </option>
                    {% endfor %}
                  </select>
                </div>

                <!-- âœ… Checkbox baru -->
                <div class="form-check mt-3 text-start">
                  <input type="checkbox" class="form-check-input" 
                        id="can_qr_attend" 
                        name="can_qr_attend" 
                        {% if employee.employee.can_qr_attend %}checked{% endif %}>
                  <label class="form-check-label" for="can_qr_attend">
                    Boleh absen menggunakan QR Code
                  </label>
                </div>
              </div>

              <!-- Kolom Kanan -->
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">First Name</label>
                  <input type="text" name="first_name" class="form-control"
                         value="{{ employee.first_name }}" required />
                </div>

                <div class="mb-3">
                  <label class="form-label">Last Name</label>
                  <input type="text" name="last_name" class="form-control"
                         value="{{ employee.last_name }}" />
                </div>

                <div class="mb-3">
                  <label class="form-label">Jabatan</label>
                  <select name="jabatan" class="form-select">
                    <option value="">-- Pilih Jabatan --</option>
                    {% for j in jabatan %}
                      <option value="{{ j.id_jabatan }}"
                        {% if j.id_jabatan == employee.employee.jabatan_id %}selected{% endif %}>
                        {{ j.nama_jabatan }}
                      </option>
                    {% endfor %}
                  </select>
                </div>

                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" name="email" class="form-control"
                         value="{{ employee.email }}" />
                </div>

                <!-- Foto -->
                <div class="mb-3 text-center">
                  <label class="form-label fw-bold">Current Photo</label><br />
                  <img src="{{ employee.employee.photo.url }}"
                       alt="Employee Photo"
                       class="img-thumbnail mb-2"
                       style="width: 150px; height: 150px; object-fit: cover" />
                  <input type="file" name="photo" class="form-control mt-2"
                         accept="image/*" />
                </div>

                
              </div>
            </div>

            <!-- Tombol Submit -->
            <div class="text-end mt-4">
              <a href="#"
                 hx-get="{% url 'employee' %}"
                 hx-target="#content"
                 hx-swap="innerHTML"
                 class="btn btn-secondary me-2">
                Cancel
              </a>
              <button type="submit" class="btn btn-primary">Update</button>
            </div>
          </form>
        </div>

        {% if form.errors %}
        <div class="alert alert-danger m-3">{{ form.errors }}</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
