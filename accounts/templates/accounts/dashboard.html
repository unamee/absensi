<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>

    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
    />

    <!-- Font Awesome (optional, kamu sudah pakai) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <style>
      body {
        overflow-x: hidden;
      }
      .sidebar {
        min-height: 100vh;
        background-color: #343a40;
        color: #fff;
        transition: margin-left 0.3s ease;
      }
      .sidebar a {
        color: #fff;
        text-decoration: none;
      }
      .sidebar .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
      /* Collapsed sidebar */
      .sidebar.collapsed {
        margin-left: -250px;
      }
      .content-area {
        transition: margin-left 0.3s ease;
      }
      .content-area.expanded {
        margin-left: 0;
      }
      /* For dropdown animation */
      .collapse.show {
        transition: height 0.3s ease;
      }

      @media print {
        .btn {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- Sidebar -->
        <nav id="sidebar" class="col-md-3 col-lg-2 sidebar p-3">
          <h4 class="text-center mb-4">Menu</h4>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                hx-get="{% url 'checkin' %}"
                hx-target="#content"
                hx-swap="innerHTML"
              >
                ðŸŸ¢ Check-in
              </a>
            </li>

            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                hx-get="{% url 'checkout' %}"
                hx-target="#content"
                hx-swap="innerHTML"
              >
                ðŸ”´ Check-out
              </a>
            </li>

            <!-- Dropdown Menu -->
            <li class="nav-item">
              <a
                class="nav-link"
                data-bs-toggle="collapse"
                href="#reportsMenu"
                role="button"
                aria-expanded="false"
              >
                ðŸ“Š Dashboard â–¾
              </a>
              <div class="collapse" id="reportsMenu">
                <ul
                  class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-3"
                >
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="{% url 'dashboard-employee' %}"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Monitoring</a
                    >
                  </li>                 
                </ul>
              </div>
              <div class="collapse" id="reportsMenu">
                <ul
                  class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-3"
                >
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="{% url 'break_scan' %}"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Ijin Keluar / Masuk</a
                    >
                  </li>                 
                </ul>
              </div>
            </li>
<!-- Hanya tampil jika bukan user 'security' -->
    {% if request.user.username != "security" %}
            <!-- Dropdown Menu -->
            <li class="nav-item">
              <a
                class="nav-link"
                data-bs-toggle="collapse"
                href="#reportsMenu"
                role="button"
                aria-expanded="false"
              >
                ðŸ“Š Master â–¾
              </a>
              <div class="collapse" id="reportsMenu">
                <ul
                  class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-3"
                >
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="{% url 'employee' %}"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Employee</a
                    >
                  </li>
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="{% url 'jabatan' %}"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Jabatan</a
                    >
                  </li>
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="{% url 'dept' %}"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Department</a
                    >
                  </li>
                </ul>
              </div>
            </li>

            <!-- Dropdown Menu -->
            <li class="nav-item">
              <a
                class="nav-link"
                data-bs-toggle="collapse"
                href="#reportsMenu"
                role="button"
                aria-expanded="false"
              >
                ðŸ“Š Reports â–¾
              </a>
              <div class="collapse" id="reportsMenu">
                <ul
                  class="btn-toggle-nav list-unstyled fw-normal pb-1 small ps-3"
                >
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="/reports/daily/"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Daily</a
                    >
                  </li>
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      hx-get="/reports/monthly/"
                      hx-target="#content"
                      hx-swap="innerHTML"
                      >Monthly</a
                    >
                  </li>
                </ul>
              </div>
            </li>
{% endif %}
            <li class="nav-item mt-3">
              <a href="{% url 'logout' %}" class="btn btn-danger w-100"
                >Logout</a
              >
            </li>
          </ul>
        </nav>

        <!-- Main Content -->
        <main
          id="content-area"
          class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4 content-area"
        >
          <!-- Sidebar toggle button -->
          <button id="toggleBtn" class="btn btn-outline-secondary mb-3">
            â˜° Toggle Menu
          </button>

          <h2>Dashboard</h2>
          <div id="content" class="mt-4">
            <div class="alert alert-info">
              Welcome, {{ request.user.username }}!
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const toggleBtn = document.getElementById("toggleBtn");
      const sidebar = document.getElementById("sidebar");
      const contentArea = document.getElementById("content-area");

      toggleBtn.addEventListener("click", () => {
        sidebar.classList.toggle("collapsed");
        contentArea.classList.toggle("expanded");
      });
    </script>
  </body>
</html>
