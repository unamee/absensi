<div class="container mt-4">
  <h3>Daftar Mesin Fingerprint</h3>
  <a
    hx-get="{% url 'machine_create' %}"
    hx-target="#content"
    hx-swap="innerHTML"
    class="btn btn-primary mb-3"
    >+ Tambah Mesin</a
  >
  <div id="content">{% include "machine/_machine_table.html" %}</div>
</div>

{% if messages %}
<div
  id="django-messages"
  class="position-fixed top-0 end-0 p-3"
  style="z-index: 9999"
>
  {% for message in messages %}
  <div
    class="alert {{ message.tags }} alert-dismissible fade show shadow"
    role="alert"
    style="min-width: 300px; transition: opacity 0.8s ease"
  >
    {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {% endfor %}
</div>
{% endif %}

<!-- Modal Konfirmasi Delete -->
<div
  class="modal fade"
  id="confirmModal"
  tabindex="-1"
  aria-labelledby="confirmModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="confirmModalLabel">Konfirmasi Hapus</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Konten form konfirmasi akan dimuat di sini oleh HTMX -->
      </div>
    </div>
  </div>
</div>

<script>
  document.body.addEventListener("htmx:afterSwap", function (evt) {
    // Tutup modal setelah data ditarik
    if (evt.detail.target.id === "content") {
      const modalEl = document.getElementById("pullDayModal");
      if (modalEl) {
        const modal = bootstrap.Modal.getInstance(modalEl);
        if (modal) modal.hide();
      }
    }
  });
</script>

<script>
  document.body.addEventListener("htmx:beforeRequest", function () {
    document.body.classList.add("cursor-wait");
  });
  document.body.addEventListener("htmx:afterRequest", function () {
    document.body.classList.remove("cursor-wait");
  });
</script>

<div id="htmx-loader" class="text-center mt-3" style="display: none">
  ‚è≥ <small>Memuat data dari mesin...</small>
</div>


